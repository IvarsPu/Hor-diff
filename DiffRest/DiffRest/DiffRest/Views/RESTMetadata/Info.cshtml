@model DiffRest.Models.Process

<div>
    <h3>REST Metadata</h3>
    <dl class="dl-horizontal">
        <dt>
            @Html.DisplayNameFor(model => model.StartTime)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.StartTime)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.EndTime)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.EndTime)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Version)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Version)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Release)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Release)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Progress)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Progress)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Done)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Done)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status.Text)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Status.Text)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status.Total)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Status.Total)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status.Loaded)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Status.Loaded)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Status.Failed)
        </dt>

        <dd>
            @Html.DisplayFor(modelItem => Model.Status.Failed)
        </dd>

        @if (Model != null && !Model.Done)
        {
            <dt>
                Procesa darbība
            </dt>

            <dd>
                <input type="button" class="btn btn-primary mb-2" value="Apturēt" onclick="stop(@Model.Id)">
            </dd>
        }
    </dl>
</div>

<script>
    //Stops Metadata Load
    function stop(id) {
        $.ajax({
            type: "GET",
            url: '/RESTMetadata/StopProcess?processId=' + id,
            success: function () {
                window.open('/RESTMetadata', '_self');
            },
            error: function () {
                alert("Kļūda apturot procesu");
            }
        });
    }
</script>
